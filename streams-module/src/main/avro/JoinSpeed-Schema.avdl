@namespace("io.confluent.ps.streams.referenceapp.joinspeed.model")
protocol Joinspeed {

  record UserId {
    string userId;
  }

  record TeamId {
    string teamId;
  }

  record DeviceToken {
    string deviceToken;
  }

  record EventId {
    string eventId;
  }

  record Event {
    EventId id;
    TeamId teamId;
    string eventDesc;
  }

  record TeamFollowerShardKey {
    TeamId teamId;
    int shardNumber;
  }

  record TeamFollowers {
    TeamId teamId;
    array<UserId> users = [];
  }

  record EventFollowersBatch {
    TeamId teamId;
    array<UserId> users = [];
  }

  record EventFollower {
    TeamId teamId;
    UserId userId;
  }

  record UserDeviceToken {
    UserId userId;
    DeviceToken token;
  }

  record UserDeviceTokenRegistry {
    array<DeviceToken> tokens;
  }

  record EventFollowerDeviceAggregate {
    TeamId teamId;
    UserId userId;
    array<DeviceToken> tokens;
  }

  record EventFollowerDevice {
    TeamId teamId;
    UserId userId;
    DeviceToken token;
  }

}